<div class="flex-container-full">
  <div class="flex-item-full filter-options collapse" id="filter-list-side">
    {{problem-filter
      store=store
      onUpdate=(action "triggerFetch")
      filter=filter
      primaryFilter=primaryFilter
      adminFilterSelect=adminFilterSelect
      orgs=model.organizations
      categoriesFilter=categoriesFilter
      doIncludeSubCategories=doIncludeSubCategories
      }}
  </div>

  <div class="flex-item-full list-view">
    <div class="list-container">
      <h1>Problems</h1>
      <div class="searchbar">
        {{search-bar
        onSearch=(action "searchProblems")
        showFilter=true
        searchOptions = searchOptions
        basePlaceholder="Search problems"
        inputValue=searchInputValue
        clearSearchResults=(action "clearSearchResults")
        selectedCriterion=searchCriterion
        }}

        {{#link-to 'problems.new' id="problem-new-link" class="new-link-btn"}}
          <i class="fas fa-plus"></i>
        {{/link-to}}
      </div>
    </div>
    <div class="results-list">
      <div class="results-info">
        <div class="results-message">
          {{listResultsMessage}}
        </div>
        <div class="layout-icons" >
          {{#if showList}}
            <img src="/images/grid.svg" alt="grid" {{action 'setGrid'}}>
            <img src="/images/list-active.svg" alt="list" {{action 'setList'}}>
          {{/if}}
          {{#if showGrid}}
            <img src="/images/grid-active.svg" alt="grid" {{action 'setGrid'}}>
            <img src="/images/list.svg" alt="list" {{action 'setList'}}>
          {{/if}}
        </div>
      </div>
      <div class="results-items" id="layout-view">
        <div class="sort-bar">
          <div class="sort-bar-item privacy">
            Privacy <i class="fas fa-filter sort-icon"></i>
            <span class="hover-menu">
              <ul>
                {{#each privacySettingOptions as |option|}}
                <li>
                  {{radio-filter
                    labelName=option.label
                    labelIcon=option.icon
                    inputValue=option.value
                    isChecked=option.isChecked
                    groupName="privacy"
                    onClick=(action "updatePrivacySetting")
                    groupValue=selectedPrivacySetting}}
                </li>
                {{/each}}
              </ul>
            </span>
          </div>
          {{toggle-control
            classToAdd="sort-bar-item name"
            onUpdate=(action "updateSortCriterion")
            initialState=1
            options=sortOptions.title
            label="Title"
            parentProp=sortCriterion
            type="title"
            activeType=sortCriterion.type}}
          <div class="sort-bar-item description">
            Description
          </div>
          {{toggle-control
            classToAdd="sort-bar-item date"
            onUpdate=(action "updateSortCriterion")
            initialState=0
            options=sortOptions.createDate
            label="Date"
            type="date"
            activeType=sortCriterion.type
            }}
          <div class="sort-bar-item status">
            Status <i class="fas fa-filter sort-icon"></i>
            <span class="hover-menu checkbox">
              <ul>
                {{#each statusOptionsList as |option|}}
                  <li>
                    <label>
                      <input type="checkbox" checked={{option.isChecked}} name={{option.name}} value={{option.value}} onclick={{action "updateStatusFilter" option.value}}>
                      <span>
                        <svg height="20" width="20">
                          <circle cx="10" cy="15" r="5" fill={{option.fill}} />
                        </svg>
                        <span class="radio-text">{{option.text}}</span>
                      </span>
                    </label>
                  </li>
                {{/each}}
              </ul>
            </span>
          </div>
          <div class="sort-bar-item action"></div>
          <div class="sort-bar-item more"></div>
        </div>
        {{#if showList}}
          {{problem-list isSearching=isSearchingProblems problems=displayProblems metadata=problemsMetadata isList=true isGrid=false moreMenuOptions=moreMenuOptions}}
        {{/if}}
        {{#if showGrid}}
          {{problem-list isSearching=isSearchingProblems problems=displayProblems metadata=problemsMetadata isList=false isGrid=true moreMenuOptions=moreMenuOptions}}
        {{/if}}

        {{pagination-control details=problemsMetadata initiatePageChange=(action "initiatePageChange")}}
      </div>
    </div>
  </div>
</div>

<div class="toggle-filter-menu">
  {{#if menuClosed}}
    <button {{action 'toggleMenu'}}><i class="fas fa-chevron-right"></i></button>
  {{else}}
    <button {{action 'toggleMenu'}}><i class="fas fa-chevron-left"></i></button>
  {{/if}}
</div>
    {{!-- <h1>Problems</h1>
    {{#link-to 'problems.new' id="problem-new-link" class="new-link-btn"}}<span>Create New Problem</span><i class="fas fa-plus"></i>{{/link-to}} --}}



      {{!-- <div class="filter-search">
        {{filter-control updateFilter=(action "updateFilter") doFilterByCategories=doFilterByCategories addCategory="addCategory" filter=filter currentUser=currentUser addCategoriesTypeahead=addCategoriesTypeahead removeCategory=(action "removeCategory")
        sortOptions=sortOptions
        sortCriterion=sortCriterion
        updateSortCriterion=(action "updateSortCriterion")
        }}

      </div> --}}


<div class="list-outlet hidden" id="outlet">
  {{outlet}}
</div>

<script>
  $('.list-view').click(function (e) {
    $('#filter-list-side').addClass('collapse');
  });
  $('#problem-new-link').click(function (e) {
    $('#outlet').removeClass('hidden');
  });
</script>